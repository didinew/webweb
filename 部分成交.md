一句话结论（先记住）

部分成交 = 你的订单数量 ＞ 当前能匹配到的对手盘数量

成交不是“要不要”，而是： 能成交多少

一、从撮合引擎角度看（核心）

撮合引擎做的事情只有一件：一口一口“吃”对手盘
👉 吃完了，就停
👉 没吃完，就等

二、最直观的订单簿例子（必看）

当前卖单簿（Asks）
   价格     数量
    30100    0.05 BTC
    30110    0.03 BTC
    30120    0.02 BTC

你下单：市价买 0.2 BTC

系统行为：
    吃 30100 → 0.05
    还剩     0.15

    吃 30110 → 0.03
    还剩     0.12

    吃 30120 → 0.02
    还剩     0.10

    卖单没了 ❌
📌 结果
成交 0.10 BTC
剩余 0.10 BTC（未成交）

👉 这就是部分成交

三、限价单为什么也会部分成交？

你挂：限价卖 30000 数量 1 BTC
买盘只有：30000 → 0.3 BTC
📌 撮合结果：成交 0.3
剩余 0.7（继续挂单）

四、部分成交后的订单状态

常见状态（逻辑）
成交情况
状态
完全未成交
open
部分成交
open
全部成交
closed

📌 注意

部分成交 ≠ 已完成
剩余部分仍在订单簿中

五、资金在“部分成交”时怎么变？
下单瞬间：全部资金 → 冻结
每次部分成交：冻结资金 ↓
已成交资金 → 结算
剩余未成交：继续冻结

六、为什么交易所“允许”部分成交？

因为：

1️⃣ 市场是碎片化的
	•	很多人
	•	很多小订单
	•	不可能刚好凑整

2️⃣ 不部分成交，市场会卡死
	•	大单永远成交不了
	•	流动性急剧下降

3️⃣ 高频交易依赖这个机制
	•	拆单
	•	吃流动性

⸻

七、为什么市价单更容易部分成交？

因为：
	•	市价单 不限制价格
	•	一路向上（或向下）吃

📌 本质

市价单 = 多次限价成交的组合


