## 第二阶段：Web3 & 钱包基础（1 周）


⸻

🎯 阶段目标（这一周结束你能做什么）

你将真正理解并能实现：
	•	Web3 的账户 / 钱包 / 私钥体系（不是“会用 MetaMask”而已）
	•	钱包如何 签名 / 验签 / 授权
	•	DApp 如何和钱包通信（前端 + 后端）
	•	能写一个 最小可用钱包交互 Demo
	•	为后续 合约 / DEX / 交易系统 打下安全基础

⸻

🗓 学习安排（7 天）

⸻

Day 1｜Web3 基础 & 账户模型（认知纠偏）

核心概念
	•	Web2 vs Web3（谁控制身份？）
	•	区块链账户模型
	•	EOA（Externally Owned Account）
	•	Contract Account
	•	地址 ≠ 公钥 ≠ 私钥
	•	为什么 私钥 = 身份

必懂原理

私钥 → 公钥 → 地址

	•	私钥：随机数（256bit）
	•	公钥：椭圆曲线计算
	•	地址：keccak256(publicKey)[后20字节]

实战（Node.js）

import { Wallet } from 'ethers'

const wallet = Wallet.createRandom()
console.log(wallet.address)
console.log(wallet.privateKey)

👉 你要清楚：

钱包不是账号，是「私钥管理器」

Day 2｜钱包 & 助记词（安全核心）

助记词本质
	•	BIP39：12 / 24 个词 = 私钥种子
	•	助记词 ≠ 私钥（可生成无限私钥）

HD Wallet（层级钱包）

m/44'/60'/0'/0/0

实战
import { HDNodeWallet } from 'ethers'

const wallet = HDNodeWallet.fromPhrase(mnemonic)
const child = wallet.derivePath("m/44'/60'/0'/0/1")

安全红线（面试必问）

❌ 私钥存在前端
❌ 明文存数据库
❌ 上传服务器

✅ 硬件钱包
✅ 本地加密
✅ 只签名不传私钥

Day 3｜签名 & 验签（Web3 灵魂）

为什么要签名？
	•	登录
	•	授权
	•	下单
	•	防重放攻击

常见签名类型

类型
用途
message 签名
登录 / 校验
EIP-712
结构化签名（DeFi 标准）
tx 签名
发交易

实战：签名 & 验签

const msg = 'Login at 2025-01-01'
const sig = await wallet.signMessage(msg)

import { verifyMessage } from 'ethers'
verifyMessage(msg, sig) === wallet.address

👉 理解重点：

Web3 登录 ≠ 账号密码
= 用私钥证明「我是我」


⸻

Day 4｜DApp 与钱包通信（前端视角）

钱包是如何注入的？

window.ethereum

常见方法
await ethereum.request({ method: 'eth_requestAccounts' })

ethers.js 封装
const provider = new BrowserProvider(window.ethereum)
const signer = await provider.getSigner()

你要搞懂的
	•	provider vs signer
	•	chainId
	•	account change / chain change 监听


⸻

Day 5｜交易发送 & Gas 机制

交易本质

{
  from,
  to,
  value,
  data,
  gas,
  nonce
}
实战：转账

await signer.sendTransaction({
  to,
  value: parseEther('0.01')
})

Gas 面试必问
	•	gasLimit vs gasPrice
	•	EIP-1559（maxFee / priorityFee）
	•	为什么交易会 pending / fail


⸻

Day 6｜钱包安全 & 攻击模型（高级）

常见攻击
	•	钓鱼签名
	•	approve 无限授权
	•	恶意合约
	•	重放攻击

真实世界案例
	•	为什么 Uniswap 要 permit
	•	为什么签名要加 nonce / deadline

防御思路
	•	message 带时间戳
	•	domain separator（EIP-712）
	•	最小授权


⸻

Day 7｜综合实战：Web3 登录系统（🔥）

目标

实现一个 Web3 登录 Demo

流程
	1.	前端请求 nonce
	2.	钱包签名
	3.	后端验签
	4.	返回 token

后端伪代码

verifyMessage(nonce, signature) === address

成果

✅ 你已经具备
	•	Web3 登录
	•	钱包授权
	•	DeFi / DEX 基础理解能力

⸻

📦 本阶段产出（简历可写）

Web3 钱包与身份系统

	•	实现基于 ECDSA 的去中心化身份认证
	•	支持助记词 / HD Wallet / EIP-712 签名
	•	完成 DApp 与钱包通信、签名校验与交易发送
	•	具备私钥安全与攻击防御意识