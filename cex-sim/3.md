Step 3 是“钱真正开始流动”的地方，也是事故最多的地方。

从这一步开始：
冻结 ≠ 余额 ≠ 成交 ≠ 资产

我会非常慢、非常严。

⸻

💣 Step 3：模拟成交系统（部分成交 + 幂等）

🎯 本 Step 目标

你将实现：
	•	成交事件模型
	•	部分成交
	•	冻结资金按成交逐步释放
	•	订单状态：PARTIALLY_FILLED / FILLED
	•	幂等处理（防 WS 重放）

⸻

一、成交是“事件”，不是函数返回值

📌 这是认知分水岭。
下单 ≠ 成交
成交 = 异步事件


⸻

八、Step 3 验收清单（严）
	•	成交可部分
	•	VWAP 正确
	•	冻结按成交逐步释放
	•	WS 重放不重复结算
	•	订单状态不可逆